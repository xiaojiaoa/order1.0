<form id="assignInstallGroup" class="col-xs-12 layer-template" action="">
    <div class="col-xs-12">
        <div class="col-xs-2 margin-top-10 text-center">
            安装组名称:
        </div>
        <div class="col-xs-6">
            <select class="form-control validate[required]" name="" id="">
                <option value="">--请选择--</option>
                <%
                if(installGroup){
                installGroup.forEach(function (element,index) {%>
                <option value="<%= element.did %>" class="selectInstallGroup"><%= element.bname %>—<%= element.dname %></option>
                <%})}%>
            </select>
        </div>
    </div>
    <div class="col-xs-12 text-center margin-top-10">
        <a class="btn btn-primary margin-top-10" id="confirmAssign">确认指定</a>
    </div>
</form>

<script type="text/javascript">
    $(document).ready(function () {
        pageSetUp();
        $(".fg-date-picker").flatpickr(data_time_picker.data_picker); // jQuery
        $("#assignInstallGroup").validationEngine({scroll: false});

        $("#confirmAssign").on({
            click:function(){
                var tid=$("input[name=oid]").val();
                var did=$(".selectInstallGroup").val();
                layer.confirm('确认指定?',{icon: 3, title:'提示'},
                    function(index){
                        $.ajax({
                            url: '/installServiceTask/'+tid+'/'+did,
                            method: 'post',
                            success: function (data) {
                                location.href="/installService"
                            },
                            error: function (response) {
                                layer.close(index)
                                var data = JSON.parse(response.responseText);
                                $.smallBox({
                                    title: "操作失败",
                                    content: data.msg,
                                    color: "#C46A69",
                                    iconSmall: "fa fa-times fa-2x fadeInRight animated",
                                    timeout: 3000
                                });
                            }
                        });
                    },
                    function(index){layer.close(index)}
                )
            }
        })
    })
</script>