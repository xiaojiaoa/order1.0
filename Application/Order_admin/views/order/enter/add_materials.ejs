<div id="enter_pass" style="display: none;">
    <div class="col-xs-12 padding-10">
        <!--<legend>客户搜索</legend>-->
        <!-- row -->
        <div class="row search-form form-horizontal">
                <div class="col-xs-12">

                    <div class="col-xs-3">
                        <div class="form-group">
                            <label class="col-xs-4 control-label">物料编号:</label>
                            <div class="col-xs-8">
                                <input class="form-control" value="" name="materNo" id="materNo">
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-3">
                        <div class="form-group">
                            <label class="col-xs-4 control-label">名称:</label>
                            <div class="col-xs-8">
                                <input class="form-control" value="" name="name" id="name">
                            </div>
                        </div>
                    </div>

                    <div class="col-xs-3">
                        <div class="form-group">
                            <button class="btn btn-primary" id="searchMater">
                                <i class="fa fa-search"></i>
                                查询
                            </button>
                        </div>
                    </div>
                </div>


                <div class="dwy-clear"></div>
        </div>
        <!-- end row -->
    </div>
    <div class="col-xs-12">
        <div class="table-responsive">
            <table class="table table-bordered table-striped" >
                <thead>
                <tr>
                    <th>
                        <label class="checkbox-inline">
                            <input type="checkbox" class="checkbox"
                                   id="checkAll">
                            <span>&nbsp;</span>
                        </label>序号
                    </th>
                    <th>物料编号</th>
                    <th>物料名称</th>
                    <th>分类名称</th>
                    <th>单位</th>
                    <th>真实库存</th>
                    <th>预警数量</th>
                </tr>
                </thead>
                <tbody id='layer-form-wrapper'>

                </tbody>
            </table>
            <p class="pagination-inmodal" id="pagination"></p>
        </div>
    </div>
    <div class="col-xs-12">
        <hr class="simple">
        <div class="col-xs-12 text-center">
            <button class="btn btn-primary margin-bottom-10" id="confirm">确认添加</button>
            <input type="hidden" class="" id="checkedValue">
        </div>
    </div>
</div>


<script type="text/javascript">

    $(document).ready(function () {

        //弹出类
        $('#addMater').on({
            click: function (e) {
                var id = $(this).attr('data-id');

                layer.open({
                    title: '添加物料',
                    type: 1,
                    area: '1400px',
                    offset: '200px',
                    content: $('#enter_pass'),
                    cancel: function () {
                        //右上角关闭回调
                    },
                    success:function(){
                        DWY_Utils.pagination({
                            dataContainer:'#layer-form-wrapper',
                            pagination :'#pagination',
                            method:'GET',
                            url:'/template/pagination',
                            pageSize:10

                        })
                    }

                });
            }
        })
        $("#searchMater").click(function () {
            var materNo = $('#materNo').val();
            var name = $('#name').val();
            DWY_Utils.pagination({
                dataContainer:'#layer-form-wrapper',
                pagination :'#pagination',
                method:'GET',
                url:'/template/pagination?materNo='+materNo+'&name='+name,
                pageSize:10

            })

        })

        var checkedValue = $('#checkedValue');
        $("#checkAll").change(function () {
            if ($(this).is(":checked")) {
                $(":checkbox").prop('checked', true);
                $("input[name='checkbox']:checked").each(function (i) {
                    checkedValue.addClass(this.value + ',')
                });
            } else {
                $(":checkbox").prop('checked', false);
                checkedValue.removeClass()
            }
        })
        $('#layer-form-wrapper').on('change',"input[name='checkbox']",function () {
            if ($(this).is(':checked')) {
                checkedValue.addClass(this.value + ',')
            } else {
                checkedValue.removeClass(this.value + ',')
            }
        })


        $('#confirm').click(function () {
            var tids = checkedValue.attr('class');
            tids = tids.substring(0, tids.length - 1).replace(/\s/g,"");
            if (!tids) {
                layer.msg('请先选择物料', {icon: 2, time: 2000});
                return;
            }
            console.log(tids);
        })


    })

</script>