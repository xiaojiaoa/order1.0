<%- include('../layouts/head_top'); %>
<%- include('../layouts/head_bottom'); %>
<%- include('../layouts/header'); %>
<%- include('../layouts/nav'); %>


<!-- MAIN PANEL -->
<div id="main" role="main">

    <!-- RIBBON -->
    <div id="ribbon">

        <!-- breadcrumb -->
        <ol class="breadcrumb">
            <li>后台管理</li>
            <li>基础数据设置</li>
        </ol>
        <!-- end breadcrumb -->


    </div>
    <!-- END RIBBON -->

    <!-- MAIN CONTENT -->
    <div id="content">

        <!--<div class="tab-title">-->
            <!--<a class="tab-title-url active" href="/system">基础数据设置</a>-->
            <!--<a class="tab-title-url " href="/system/timeSet">预警时间设置</a>-->
            <!--<a class="tab-title-url " href="/system/timeSet">预警时间设置</a>-->
        <!--</div>-->
        <!-- well -->
        <div class="well no-border no-box-shadow basicDataSet">
            <!-- row -->
            <div class="row">
                <!-- col -->
                <div class="col-xs-4 table-responsive scroll">
                    <div data-level="level-1" class="text-align-center basicDataTit01">
                     &nbsp;
                    </div>
                    <div class="basicDataTit text-align-center basicDataTit01">
                        类别
                    </div>
                    <table class="table table-bordered table-linkage basicDataFirst">
                        <tbody>
                        <%
                        if(DWY_Helper.isCanLoop(basicDataList)){
                        basicDataList.forEach(function (element, index) { %>
                        <tr key="<%= element.key%>">
                            <td ><%= element.name %></td>
                        </tr>
                        <%  })
                        }else{ %>
                        <tr>
                            <td  align="center">暂无数据</td>
                        </tr>
                        <% } %>

                        </tbody>
                    </table>

                </div>

                <div class="col-xs-4 table-responsive level-1 scroll">

                        <div data-level="level-1" class="text-align-center basicDataTit01">
                            <a class="label label-primary create status01">新建</a>
                            <a class="label label-primary modify status01">修改</a>
                            <a class="label label-primary open-this status03">启用</a>
                            <a class="label label-danger delete status01">删除</a>
                            <a class="label label-primary see-all status01">查看所有</a>
                            <a class="label label-primary open-all status03">启用所有</a>
                            <a class="label label-primary revoke status02">撤销</a>
                            <a class="label label-primary save status02">保存</a>
                            <input type="hidden" name="key" value="" class="key"type='text'/>
                        </div>
                        <div class="basicDataTit text-align-center basicDataTit01">
                            类别1
                        </div>
                        <table class="table table-bordered table-linkage ">
                            <tbody class="basicDataSec">
                            <tr><td>请点击左侧进行查看</td></tr>
                            </tbody>
                        </table>

                </div>

                <div class="col-xs-4 table-responsive level-2 scroll">
                    <div data-level="level-2" class="text-align-center basicDataTit01">
                        <a class="label label-primary create status01">新建</a>
                        <a class="label label-primary modify status01">修改</a>
                        <a class="label label-danger delete status01">删除</a>
                        <a class="label label-primary revoke status02">撤销</a>
                        <a class="label label-primary save status02">保存</a>
                    </div>
                    <div class="basicDataTit text-align-center basicDataTit01">
                        类别2
                    </div>
                    <table class="table table-bordered table-linkage ">
                        <tbody class="basicDataThree">
                        <tr><td>暂无数据</td></tr>
                        </tbody>
                    </table>

                </div>
                <!-- end col -->
                <!--col-->
                <!--end col-->
            </div>
            <!-- end row -->
        </div>
        <!-- end well -->
        <!-- well -->
        <!-- end well -->


    </div>
    <!-- END MAIN CONTENT -->

</div>
<!-- END MAIN PANEL -->

<%- include('../layouts/footer'); %>
<%- include('../layouts/footer_common_script'); %>
<script type="text/javascript">

    $(document).ready(function () {

        //点击basicDataFirst--左边第一栏的tr时
        $(".basicDataFirst>tbody>tr").click(function(){
         var key=$(this).attr("key");
             $("input[name=key]").val(key);
            //系统配置项目去掉类别2
            if(key=="assistantConfig"){
                $(".level-1").removeClass('col-xs-4').addClass("col-xs-8");
                $(".level-2").addClass("display-none");
            }
            else{
                $(".level-1").removeClass('col-xs-8').addClass("col-xs-4");
                $(".level-2").removeClass("display-none");
            }
            $.ajax({
                url: '/system/'+key,
                method: 'put',
                success: function (data) {
                    var arry= JSON.parse(data);
                    console.log(arry);
                    if(arry.length==0){
                        $(".basicDataSec").html('<tr><td>暂无数据</td></tr>');
                    }
                    else if(key=="assistantConfig"){
                             var frag="";
                             for(var i=0;i<arry.length;i++){
                                 frag+="<tr id="+arry[i].id+" stcode="+arry[i].stcode+"><td><input class='border-0 text-align-center' type='text' value="+arry[i].code+" name='code' readonly/></td><td><input class='border-0 text-align-center' type='text' value="+arry[i].value+" name='value' readonly/></td><td><input class='border-0 text-align-center' type='text' value="+arry[i].remark+" name='remark' readonly/></td></tr>"
                             }
                             $(".basicDataSec").html(frag);
                     }
                     else  if(key=="assistantBrandInfo"){
                        var frag="";
                        for(var i=0;i<arry.length;i++){
                            frag+="<tr id="+arry[i].id+" stcode="+arry[i].stcode+"><td><input class='border-0 text-align-center' type='text' value="+arry[i].type+" name='type' readonly/></td><td><input class='border-0 text-align-center' type='text' value="+arry[i].name+" name='name' readonly/></td></tr>"
                        }
                        $(".basicDataSec").html(frag);
                    }
                    else  if(key=="assistantOrderSpaceinfo"){
                        var frag="";
                        for(var i=0;i<arry.length;i++){
                            frag+="<tr id="+arry[i].id+" stcode="+arry[i].stcode+"><td><input class='border-0 text-align-center' type='text' value="+arry[i].parentId+" name='parentId' readonly/></td><td><input class='border-0 text-align-center' type='text' value="+arry[i].name+" name='name' readonly/></td></tr>"
                        }
                        $(".basicDataSec").html(frag);
                    }
                    else  if(key=="assistantSpaceProd"){
                        var frag="";
                        for(var i=0;i<arry.length;i++){
                            frag+="<tr id="+arry[i].id+" stcode="+arry[i].stcode+"><td><input class='border-0 text-align-center' type='text' value="+arry[i].name+" name='name' readonly/></td><td><input class='border-0 text-align-center' type='text' value="+arry[i].spaceId+" name='spaceId' readonly/></td></tr>"
                        }
                        $(".basicDataSec").html(frag);
                    }
                    else  if(key=="assistantResupplyReason"){
                        var frag="";
                        for(var i=0;i<arry.length;i++){
                            frag+="<tr id="+arry[i].id+" stcode="+arry[i].stcode+"><td><input class='border-0 text-align-center' type='text' value="+arry[i].name+" name='name' readonly/></td><td><input class='border-0 text-align-center' type='text' value="+arry[i].parentId+" name='parentId' readonly/></td><td><input class='border-0 text-align-center' type='text' value="+arry[i].levelType+" name='levelType' readonly/></td></tr>"
                        }
                        $(".basicDataSec").html(frag);
                    }
                    else  if(key=="assistantReviewReson"){
                        var frag="";
                        for(var i=0;i<arry.length;i++){
                            frag+="<tr id="+arry[i].id+" stcode="+arry[i].stcode+"><td><input class='border-0 text-align-center' type='text' value="+arry[i].name+" name='name' readonly/></td><td><input class='border-0 text-align-center' type='text' value="+arry[i].reasonType+" name='reasonType' readonly/></tr>"
                        }
                        $(".basicDataSec").html(frag);
                    }
                    else  if(key=="assistantTaskseqFileType"){
                        var frag="";
                        for(var i=0;i<arry.length;i++){
                            frag+="<tr id="+arry[i].id+" stcode="+arry[i].stcode+"><td><input class='border-0 text-align-center' type='text' value="+arry[i].type+" name='type' readonly/></td><td><input class='border-0 text-align-center' type='text' value="+arry[i].name+" name='name' readonly/></td><td><input class='border-0 text-align-center' type='text' value="+arry[i].fileExt+" name='fileExt' readonly/></td></tr>"
                        }
                        $(".basicDataSec").html(frag);
                    }
                    else  if(key=="assistantOrderFileType"){
                        var frag="";
                        for(var i=0;i<arry.length;i++){
                            frag+="<tr id="+arry[i].id+" stcode="+arry[i].stcode+"><td><input class='border-0 text-align-center' type='text' value="+arry[i].code+" name='code' readonly/></td><td><input class='border-0 text-align-center' type='text' value="+arry[i].name+" name='name' readonly/></td><td><input class='border-0 text-align-center' type='text' value="+arry[i].fileExt+" name='fileExt' readonly/></td></tr>"
                        }
                        $(".basicDataSec").html(frag);
                    }
                   /* else  if(key=="assistantEcType"|| key=="assistantCargoType" || key=="assistantRequestStcode" ||key=="assistantPurchaseStcode"
                      || key=="assistantContractStcode"|| key=="assistantAddrType" ||key=="assistantRemindDate"
                    ){
                        var frag="";
                        for(var i=0;i<arry.length;i++){
                            frag+="<tr id="+arry[i].id+" stcode="+arry[i].stcode+"><td>"+arry[i].id+"</td><td><input class='border-0 text-align-center' type='text' value="+arry[i].name+" name='name' readonly/></td></tr>"
                        }
                        $(".basicDataSec").html(frag);
                    }*/
                    else{
                        var frag="";
                        for(var i=0;i<arry.length;i++){
                            frag+="<tr id="+arry[i].id+" stcode="+arry[i].stcode+"><td><input class='border-0 text-align-center' type='text' value="+arry[i].name+" name='name' readonly/></td></tr>"
                        }
                        $(".basicDataSec").html(frag);
                    }


                },
                error: function (response) {
                    layer.close(index)
                    errorLayout.normal(response);
                }
            });

        });


    })

</script>

<%- include('./index-model'); %>
<%- include('../layouts/foot'); %>